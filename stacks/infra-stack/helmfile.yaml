environments:
  default:
    values:
      - subnetOctet: {{ env "SUBNET_OCTET" | default "70" }}

---
{{- $offlineDeploy := (env "OFFLINE_DEPLOY" | default "offline_deploy") -}}

releases:
  - name: openebs
    namespace: openebs
    chart: /home/prisma/{{ $offlineDeploy }}/helm_charts/downloaded_helm_charts/openebs       # Local chart for OpenEBS
    wait: true
    timeout: 600
    values:
      - openebs/values.yml
    hooks:
      - events: ["postsync"]
        showlogs: true
        command: "kubectl"
        args:
          - "apply"
          - "-f"
          - "openebs/storageclass.yml"

  - name: nginx-controller
    namespace: kube-system
    chart: /home/prisma/{{ $offlineDeploy }}/helm_charts/downloaded_helm_charts/ingress-nginx
    timeout: 600               
    values:
      - ingress-nginx/values.yml

  - name: metallb
    namespace: metallb
    chart: /home/prisma/{{ $offlineDeploy }}/helm_charts/downloaded_helm_charts/metallb      
    wait: true
    timeout: 600  
    values:
      - metallb/values.yml

  - name: pihole
    namespace: pihole
    chart: /home/prisma/{{ $offlineDeploy }}/helm_charts/downloaded_helm_charts/pihole      
    wait: true
    timeout: 600
    values:
      - pihole/values.yml
