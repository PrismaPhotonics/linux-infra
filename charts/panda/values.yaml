# Focus Server values
cleanupService:
  serviceAccountName: cleanup-sa

focusServer:
  nameOverride: "focus-server"
  replicaCount: 1
  serviceAccountName: focus-server-sa
  ingress:
    enabled: false
    ingressClassName: "nginx"
    rules: [ ]
    tls: [ ]
  image:
    repository: "262399703539.dkr.ecr.eu-central-1.amazonaws.com/pzlinux"
    tag: "10.7.104"
    pullPolicy: IfNotPresent
  workingDir: "/home/prisma"
  command:
    - "./debug-codebase/active-python-env.sh"
    - "-m"
    - "focus_server"
  service:
    type: ClusterIP
    port: 5000
  env:
    PZ_IMAGE_TAG: "10.7.104"
    PRISMA_CONFIG: "/home/prisma/pz/config/"
  volumeMounts:
    debugEnv:
      mountPath: "/home/prisma/debug-codebase"
    prismaConfig:
      mountPath: "/home/prisma/pz/config"
  volumes:
    debugEnv:
      path: "/home/prisma/debug-codebase"
    prismaConfig:
      path: "/home/prisma/pz/config"
    pythonPackages:
      path: "/home/prisma/.local/lib/python3.10/site-packages"
  terminationGracePeriodSeconds: 30

# SEGY Recorder values
segyRecorder:
  nameOverride: "segy-recorder"
  replicaCount: 1
  image:
    repository: "262399703539.dkr.ecr.eu-central-1.amazonaws.com/pzlinux"
    tag: "10.7.104"
    pullPolicy: IfNotPresent
  workingDir: "/home/prisma"
  command:
    - "./debug-codebase/active-python-env.sh"
    - "-m"
    - "smart_recorder"
    - "--storage-cfg"
    - "/home/prisma/pz/config/storage_manager/storage.yaml"
    - "--storage"
    - "segy"
    - "-b"
    - "segy"
    - "-fl"
    - "10000"
    - "--file-limit-duration"
    - "5"
    - "--log-name"
    - "segy-recorder"
    - "-vf"
    - "--record-livefs"
    - "--mongo-mapper-index"
    - "--allow-use-existing-queue"
  env:
    PRISMA_RABBIT_MACHINE_NAME: "data-rabbitmq.prismaphotonics.net"
    PRISMA_CERTIFICATES: "/etc/ssl/certs"
    PRISMA_CONFIG: "/home/prisma/pz/config"
  volumeMounts:
    debugEnv:
      mountPath: "/home/prisma/debug-codebase"
    prismaConfig:
      mountPath: "/home/prisma/pz/config"
    storageSan:
      mountPath: "/prisma/root/recordings"
  volumes:
    debugEnv:
      path: "/home/prisma/debug-codebase"
    prismaConfig:
      path: "/home/prisma/pz/config"
    storageSan:
      path: "/prisma/root/recordings"
  tlsSecret:
    name: "rabbitmq-tls-secret"
    items:
      caCrtPath: "ca.crt"
      tlsCrtPath: "tls.crt"
      tlsKeyPath: "tls.key"
  terminationGracePeriodSeconds: 30
